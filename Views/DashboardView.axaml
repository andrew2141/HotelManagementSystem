<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:Avalonia_application.ViewModels"
             x:Class="Avalonia_application.Views.DashboardView">
             
    <UserControl.DataContext>
        <vm:DashboardViewModel/>
    </UserControl.DataContext>
    
    <ScrollViewer>
        <Border Padding="20">
            <StackPanel Spacing="20">
                <!-- Приветственное сообщение -->
                <TextBlock Text="Панель управления" FontSize="24" FontWeight="Bold"/>
                
                <!-- Статистика по номерам -->
                <GroupBox Header="Статистика по номерам">
                    <UniformGrid Columns="3" RowDefinitions="Auto,Auto" ColumnSpacing="15" RowSpacing="10">
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="5" Padding="15">
                            <StackPanel>
                                <TextBlock Text="Всего номеров" Foreground="#666" FontSize="14"/>
                                <TextBlock Text="{Binding TotalRooms}" FontSize="28" FontWeight="Bold" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="5" Padding="15">
                            <StackPanel>
                                <TextBlock Text="Занято" Foreground="#666" FontSize="14"/>
                                <TextBlock Text="{Binding OccupiedRooms}" FontSize="28" FontWeight="Bold" Foreground="#FF5722" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="5" Padding="15">
                            <StackPanel>
                                <TextBlock Text="Свободно" Foreground="#666" FontSize="14"/>
                                <TextBlock Text="{Binding AvailableRooms}" FontSize="28" FontWeight="Bold" Foreground="#4CAF50" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        
                        <Border Grid.Row="1" Grid.ColumnSpan="3" Padding="10">
                            <StackPanel Spacing="5">
                                <TextBlock Text="Процент загрузки" FontWeight="Bold"/>
                                <ProgressBar Value="{Binding OccupancyRate}" Maximum="100" Height="20" 
                                             Foreground="{Binding OccupancyRate, Converter={StaticResource OccupancyToColorConverter}}"/>
                                <TextBlock Text="{Binding OccupancyRate, StringFormat='{}{0}%'}" HorizontalAlignment="Right"/>
                            </StackPanel>
                        </Border>
                    </UniformGrid>
                </GroupBox>
                
                <!-- Финансовые показатели -->
                <GroupBox Header="Финансовые показатели (за сегодня)">
                    <UniformGrid Columns="3" ColumnSpacing="15" RowSpacing="15">
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="5" Padding="15">
                            <StackPanel>
                                <TextBlock Text="Выручка за сегодня" Foreground="#666" FontSize="14"/>
                                <TextBlock Text="{Binding TodayRevenue, StringFormat='{}{0:C}'}" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="5" Padding="15">
                            <StackPanel>
                                <TextBlock Text="ADR (средняя стоимость номера)" Foreground="#666" FontSize="14" TextWrapping="Wrap"/>
                                <TextBlock Text="{Binding ADR, StringFormat='{}{0:C}'}" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="5" Padding="15">
                            <StackPanel>
                                <TextBlock Text="RevPAR (доход на номер)" Foreground="#666" FontSize="14" TextWrapping="Wrap"/>
                                <TextBlock Text="{Binding RevPAR, StringFormat='{}{0:C}'}" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                    </UniformGrid>
                </GroupBox>
                
                <!-- Последние активности -->
                <StackPanel Spacing="15">
                    <TextBlock Text="Последние бронирования" FontSize="18" FontWeight="Bold"/>
                    <DataGrid Items="{Binding RecentBookings}" IsReadOnly="True" AutoGenerateColumns="False" Height="200">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" Binding="{Binding BookingID}" Width="50"/>
                            <DataGridTextColumn Header="Гость" Binding="{Binding GuestName}" Width="150"/>
                            <DataGridTextColumn Header="Номер" Binding="{Binding RoomNumber}" Width="80"/>
                            <DataGridTextColumn Header="Заезд" Binding="{Binding CheckInDate, StringFormat='{}{0:dd.MM.yyyy}'}" Width="100"/>
                            <DataGridTextColumn Header="Выезд" Binding="{Binding CheckOutDate, StringFormat='{}{0:dd.MM.yyyy}'}" Width="100"/>
                            <DataGridTextColumn Header="Статус" Binding="{Binding Status}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>
                
                <!-- Задачи на уборку -->
                <StackPanel Spacing="15">
                    <TextBlock Text="Задачи на уборку (сегодня)" FontSize="18" FontWeight="Bold"/>
                    <DataGrid Items="{Binding PendingCleaningTasks}" IsReadOnly="True" AutoGenerateColumns="False" Height="200">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Номер" Binding="{Binding RoomNumber}" Width="80"/>
                            <DataGridTextColumn Header="Сотрудник" Binding="{Binding EmployeeName}" Width="150"/>
                            <DataGridTextColumn Header="Статус" Binding="{Binding Status}" Width="120"/>
                            <DataGridTemplateColumn Header="Действия" Width="120">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Content="Выполнено" Command="{Binding DataContext.MarkTaskCompleteCommand, ElementName=Root}" 
                                                CommandParameter="{Binding ScheduleID}" HorizontalAlignment="Center"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>
            </StackPanel>
        </Border>
    </ScrollViewer>
</UserControl>